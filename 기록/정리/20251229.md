# 닉네임 수정

1. controller에 닉네임 수정 메서드 추가, nicknameRequest 추가

```java
public record NicknameRequest(String nickname) {}

@PatchMapping("/nickname")
public ResponseEntity<String> updateNickname(@AuthenticationPrincipal String email, @RequestBody NicknameRequest dto) {
    userService.updateNickname(email, dto.nickname());
    return ResponseEntity.ok("닉네임이 성공적으로 수정되었습니다.");
}
```
- `@AuthenticationPrincipal String email` 로 유저 정보를 받음

2. userService에 닉네임 수정 로직 추가
```java
@Transactional
public void updateNickname(String email, String newNickname) {
  User user = userRepository.findByEmail(email)
          .orElseThrow(() -> new RuntimeException("유저를 찾을 수 없습니다."));

  // 닉네임 중복 체크
  if(userRepository.existsByNickname(newNickname)) {
      throw new NicknameExistsException("이미 사용 중인 닉네임입니다.");
  }
  user.updateNickname(newNickname);
}
```

3. user 엔티티에 updateNickname 메서드 추가
```java
public void updateNickname(String newNickname) {
  if(newNickname == null || newNickname.isBlank()) {
      throw new IllegalArgumentException("닉네임은 빈값일 수 없습니다.");
  }
  this.nickname = newNickname;
}
```

# 엔티티 생성